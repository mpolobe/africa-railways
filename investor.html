<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARail Investor Portal - Africa Railways</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Sui dApp Kit and dependencies -->
    <script src="https://unpkg.com/@mysten/sui@latest/dist/index.global.js"></script>
    <script src="https://unpkg.com/@mysten/dapp-kit@latest/dist/index.global.js"></script>
    <script src="https://unpkg.com/@tanstack/react-query@latest/build/umd/index.production.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/@mysten/dapp-kit@latest/dist/index.css">
    <style>
        :root {
            --navy: #0a0e1a;
            --gold: #FFB800;
            --cyan: #00D4FF;
            --white: #ffffff;
            --surface: #16203a;
            --green: #10b981;
            --red: #ef4444;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--navy);
            color: var(--white);
            line-height: 1.6;
        }
        
        .portal-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--surface) 0%, #1a2642 100%);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid #333;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--cyan) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .header p {
            color: #94a3b8;
            font-size: 1.1rem;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .metric-card {
            background: var(--surface);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid #333;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--gold), var(--cyan));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            border-color: var(--gold);
            box-shadow: 0 10px 30px rgba(255, 184, 0, 0.2);
        }
        
        .metric-card:hover::before {
            opacity: 1;
        }
        
        .metric-label {
            color: #94a3b8;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .metric-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--white);
            margin-bottom: 5px;
        }
        
        .metric-change {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .metric-change.positive {
            color: var(--green);
        }
        
        .metric-change.negative {
            color: var(--red);
        }
        
        .section {
            background: var(--surface);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid #333;
            margin-bottom: 30px;
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--gold);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .blockchain-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .stat-item {
            padding: 15px;
            background: rgba(255, 184, 0, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 184, 0, 0.2);
        }
        
        .stat-item-label {
            color: #94a3b8;
            font-size: 0.85rem;
            margin-bottom: 5px;
        }
        
        .stat-item-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--white);
        }
        
        .revenue-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .revenue-item {
            padding: 20px;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(255, 184, 0, 0.1) 100%);
            border-radius: 12px;
            border: 1px solid rgba(255, 184, 0, 0.3);
        }
        
        .revenue-item h3 {
            color: var(--cyan);
            font-size: 1rem;
            margin-bottom: 10px;
        }
        
        .revenue-amount {
            font-size: 2rem;
            font-weight: 800;
            color: var(--white);
            margin-bottom: 5px;
        }
        
        .revenue-detail {
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        .unicorn-vision {
            background: linear-gradient(135deg, rgba(255, 184, 0, 0.1) 0%, rgba(0, 212, 255, 0.1) 100%);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid var(--gold);
            margin-bottom: 30px;
        }
        
        .unicorn-vision h2 {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--gold);
        }
        
        .vision-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .vision-point {
            display: flex;
            align-items: start;
            gap: 15px;
        }
        
        .vision-icon {
            width: 40px;
            height: 40px;
            background: var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--navy);
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        .vision-content h3 {
            color: var(--cyan);
            margin-bottom: 5px;
        }
        
        .vision-content p {
            color: #94a3b8;
            font-size: 0.95rem;
        }
        
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--green);
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--green);
            margin-bottom: 20px;
        }
        
        .live-dot {
            width: 8px;
            height: 8px;
            background: var(--green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.2);
            }
        }
        
        .cta-section {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, var(--surface) 0%, #1a2642 100%);
            border-radius: 15px;
            border: 1px solid #333;
        }
        
        .cta-button {
            display: inline-block;
            padding: 15px 40px;
            background: var(--gold);
            color: var(--navy);
            text-decoration: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            margin: 10px;
        }
        
        .cta-button:hover {
            background: var(--cyan);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }
        
        .cta-button.secondary {
            background: transparent;
            border: 2px solid var(--gold);
            color: var(--gold);
        }
        
        .cta-button.secondary:hover {
            background: rgba(255, 184, 0, 0.1);
            border-color: var(--cyan);
            color: var(--cyan);
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .metric-value {
                font-size: 2rem;
            }
            
            .vision-points {
                grid-template-columns: 1fr;
            }
        }
        
        .last-updated {
            text-align: center;
            color: #64748b;
            font-size: 0.85rem;
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 184, 0, 0.05);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { AlertCircle, ChevronRight, TrendingUp, Shield, Users, Zap } = lucide;
        
        // Import Sui dApp Kit hooks
        const { 
            WalletProvider, 
            SuiClientProvider, 
            useCurrentAccount,
            useConnectWallet,
            useSignAndExecuteTransaction,
            useWallets,
            createNetworkConfig
        } = window['@mysten/dapp-kit'];
        
        const { getFullnodeUrl } = window['@mysten/sui/client'];
        const { Transaction } = window['@mysten/sui/transactions'];
        const { QueryClient, QueryClientProvider } = window['@tanstack/react-query'];

        // Configure network
        const { networkConfig } = createNetworkConfig({
            mainnet: { url: getFullnodeUrl('mainnet') },
            testnet: { url: getFullnodeUrl('testnet') },
        });
        
        const queryClient = new QueryClient();

        function ARailInvestorPortal() {
            const [investAmount, setInvestAmount] = useState(500);
            const [isInvesting, setIsInvesting] = useState(false);
            const [txStatus, setTxStatus] = useState('');
            
            // Use dApp Kit hooks
            const currentAccount = useCurrentAccount();
            const { mutate: connect } = useConnectWallet();
            const { mutate: signAndExecuteTransaction } = useSignAndExecuteTransaction();
            const wallets = useWallets();
            
            const walletConnected = !!currentAccount;
            const walletAddress = currentAccount?.address || '';

            // REAL-TIME DATA: December 31, 2025
            const suiPrice = 1.44; 
            const stakingAPY = 0.0191; // ~1.91% base staking rate for late 2025
            const totalRaise = 350000; // Total SUI for $500k goal (~347k SUI)
            const currentRaised = 85400; 
            const equityOffered = 10; // 10% equity for Pre-Seed

            // Smart Contract Configuration
            const PACKAGE_ID = "0x_YOUR_PACKAGE_ID_HERE"; // Replace after deployment
            const FUND_OBJECT_ID = "0x_YOUR_FUND_OBJECT_ID_HERE"; // Replace after deployment

            const calculateEquity = (sui) => ((sui / totalRaise) * equityOffered).toFixed(4);
            const calculateUSD = (sui) => (sui * suiPrice).toLocaleString(undefined, { minimumFractionDigits: 2 });

            // Connect to Sui Wallet using dApp Kit
            const connectWallet = () => {
                if (wallets.length === 0) {
                    setTxStatus('No Sui wallets detected. Please install Sui Wallet or Suiet.');
                    setTimeout(() => setTxStatus(''), 5000);
                    return;
                }
                
                // Connect to the first available wallet (or Slush if available)
                const preferredWallet = wallets.find(w => w.name === 'Slush') || wallets[0];
                
                connect(
                    { wallet: preferredWallet },
                    {
                        onSuccess: () => {
                            setTxStatus('Wallet connected successfully!');
                            setTimeout(() => setTxStatus(''), 3000);
                        },
                        onError: (error) => {
                            console.error('Wallet connection error:', error);
                            setTxStatus('Failed to connect wallet');
                            setTimeout(() => setTxStatus(''), 3000);
                        }
                    }
                );
            };

            // Execute Investment Transaction using dApp Kit
            const executeInvestment = () => {
                if (!walletConnected) {
                    setTxStatus('Please connect your wallet first');
                    return;
                }

                if (investAmount < 100) {
                    setTxStatus('Minimum investment is 100 SUI');
                    setTimeout(() => setTxStatus(''), 3000);
                    return;
                }

                setIsInvesting(true);
                setTxStatus('Preparing transaction...');

                try {
                    // Convert SUI to MIST (1 SUI = 1,000,000,000 MIST)
                    const amountInMist = BigInt(investAmount * 1_000_000_000);

                    // Create transaction using new Transaction class
                    const tx = new Transaction();
                    
                    tx.moveCall({
                        target: `${PACKAGE_ID}::fundraising::invest`,
                        arguments: [
                            tx.object(FUND_OBJECT_ID),
                            tx.pure.u64(amountInMist)
                        ],
                    });

                    setTxStatus('Awaiting wallet approval...');
                    
                    // Sign and execute using dApp Kit hook
                    signAndExecuteTransaction(
                        {
                            transaction: tx,
                            chain: 'sui:mainnet',
                        },
                        {
                            onSuccess: (result) => {
                                console.log('Transaction successful:', result);
                                setTxStatus(`‚úÖ Success! TX: ${result.digest.substring(0, 10)}...`);
                                setTimeout(() => {
                                    setTxStatus('Investment complete! Check your wallet for Receipt NFT');
                                    setIsInvesting(false);
                                }, 2000);
                            },
                            onError: (error) => {
                                console.error('Transaction failed:', error);
                                setTxStatus(`‚ùå Transaction failed: ${error.message}`);
                                setIsInvesting(false);
                                setTimeout(() => setTxStatus(''), 5000);
                            }
                        }
                    );
                } catch (error) {
                    console.error('Investment error:', error);
                    setTxStatus(`‚ùå Error: ${error.message}`);
                    setIsInvesting(false);
                    setTimeout(() => setTxStatus(''), 5000);
                }
                            setTxStatus(`Investment of ${investAmount} SUI recorded! You would receive an Equity Receipt NFT representing ${calculateEquity(investAmount)}% equity.`);
                        }, 2000);
                    }
                } catch (error) {
                    console.error('Investment error:', error);
                    setTxStatus(`‚ùå Transaction failed: ${error.message || 'Please try again'}`);
                } finally {
                    setIsInvesting(false);
                    setTimeout(() => setTxStatus(''), 8000);
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 text-white font-sans">
                    {/* Header */}
                    <header className="border-b border-blue-800 bg-slate-900/50 backdrop-blur sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <span className="text-3xl">üöÇ</span>
                                <div>
                                    <h1 className="text-2xl font-bold tracking-tight">ARAIL</h1>
                                    <p className="text-xs text-blue-300 uppercase tracking-widest font-semibold">Africa's Digital Railway</p>
                                </div>
                            </div>
                            <button
                                onClick={connectWallet}
                                className={`px-6 py-2 rounded-lg font-bold transition-all shadow-lg ${
                                    walletConnected 
                                        ? 'bg-green-600 hover:bg-green-700 shadow-green-900/20' 
                                        : 'bg-blue-600 hover:bg-blue-700 shadow-blue-900/40 hover:scale-105'
                                }`}
                            >
                                {walletConnected ? `‚úì ${walletAddress.substring(0, 6)}...${walletAddress.substring(walletAddress.length - 4)} Connected` : 'Connect SUI Wallet'}
                            </button>
                        </div>
                    </header>

                    {/* Main Hero & Raise Section */}
                    <main className="max-w-7xl mx-auto px-4 py-12">
                        <div className="text-center mb-16">
                            <div className="inline-block px-4 py-1 bg-blue-500/20 border border-blue-500/30 rounded-full text-blue-300 text-sm mb-6 animate-pulse">
                                üî• Pre-Seed Phase: 24.4% Allocated
                            </div>
                            <h2 className="text-6xl font-extrabold mb-6 bg-gradient-to-r from-blue-400 via-cyan-300 to-blue-500 bg-clip-text text-transparent">
                                Own the Rail OS of the Future
                            </h2>
                            <p className="text-xl text-slate-300 max-w-2xl mx-auto leading-relaxed">
                                We're digitizing the $1.4B TAZARA expansion. Bridging the gap between 
                                physical infrastructure and global liquidity on the Sui Network.
                            </p>
                        </div>

                        <div className="grid lg:grid-cols-2 gap-12 items-start">
                            {/* Left: Stats & MVP */}
                            <div className="space-y-8">
                                <div className="bg-slate-800/50 border border-blue-700 p-8 rounded-2xl">
                                    <h3 className="text-xl font-bold mb-6 flex items-center gap-2">
                                        <i className="fas fa-chart-line text-cyan-400"></i> Raising $500,000 USD
                                    </h3>
                                    <div className="space-y-4">
                                        <div className="flex justify-between text-sm font-medium">
                                            <span className="text-blue-300">{currentRaised.toLocaleString()} SUI Secured</span>
                                            <span className="text-slate-400">{totalRaise.toLocaleString()} SUI Goal</span>
                                        </div>
                                        <div className="w-full bg-slate-700 rounded-full h-4">
                                            <div 
                                                className="bg-gradient-to-r from-blue-500 to-cyan-400 h-4 rounded-full shadow-lg shadow-blue-500/20"
                                                style={{ width: `${(currentRaised / totalRaise) * 100}%` }}
                                            />
                                        </div>
                                        <div className="grid grid-cols-3 gap-4 pt-4">
                                            <div className="bg-slate-900/50 p-3 rounded-xl border border-slate-700">
                                                <div className="text-lg font-bold text-cyan-400">37</div>
                                                <div className="text-[10px] text-slate-500 uppercase font-bold">Backers</div>
                                            </div>
                                            <div className="bg-slate-900/50 p-3 rounded-xl border border-slate-700">
                                                <div className="text-lg font-bold text-cyan-400">01/2026</div>
                                                <div className="text-[10px] text-slate-500 uppercase font-bold">MVP Launch</div>
                                            </div>
                                            <div className="bg-slate-900/50 p-3 rounded-xl border border-slate-700">
                                                <div className="text-lg font-bold text-cyan-400">$1.44</div>
                                                <div className="text-[10px] text-slate-500 uppercase font-bold">SUI Price</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-blue-900/20 border border-blue-800 p-6 rounded-2xl">
                                        <div className="text-2xl mb-2">üì±</div>
                                        <h4 className="font-bold text-blue-300">USSD Native</h4>
                                        <p className="text-xs text-slate-400 leading-relaxed">Built for feature phones (*723#). Accessible to 100% of the Zambian workforce.</p>
                                    </div>
                                    <div className="bg-blue-900/20 border border-blue-800 p-6 rounded-2xl">
                                        <div className="text-2xl mb-2">‚õìÔ∏è</div>
                                        <h4 className="font-bold text-blue-300">Sui zkLogin</h4>
                                        <p className="text-xs text-slate-400 leading-relaxed">No seed phrases. Staff log in with Google/Apple to manage tickets.</p>
                                    </div>
                                </div>
                            </div>

                            {/* Right: Calculator */}
                            <div className="bg-slate-800 p-8 rounded-2xl border-2 border-blue-600 shadow-2xl shadow-blue-900/20">
                                <h3 className="text-2xl font-bold mb-8 text-center">Investor Commitment</h3>
                                
                                <div className="space-y-8">
                                    <div>
                                        <div className="flex justify-between items-end mb-4">
                                            <label className="text-sm font-bold text-blue-300 uppercase tracking-widest">Amount to Stake</label>
                                            <span className="text-3xl font-black text-white">{investAmount} <span className="text-sm text-slate-500">SUI</span></span>
                                        </div>
                                        <input
                                            type="range" min="100" max="10000" step="100"
                                            value={investAmount}
                                            onChange={(e) => setInvestAmount(Number(e.target.value))}
                                            className="w-full h-3 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-400"
                                        />
                                    </div>

                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-slate-900 p-4 rounded-xl border border-slate-700">
                                            <div className="text-xs text-slate-500 font-bold uppercase mb-1">USD Value</div>
                                            <div className="text-xl font-bold text-green-400">${calculateUSD(investAmount)}</div>
                                        </div>
                                        <div className="bg-slate-900 p-4 rounded-xl border border-slate-700">
                                            <div className="text-xs text-slate-500 font-bold uppercase mb-1">Equity %</div>
                                            <div className="text-xl font-bold text-cyan-400">{calculateEquity(investAmount)}%</div>
                                        </div>
                                    </div>

                                    <div className="bg-blue-950/40 rounded-xl p-5 border border-blue-800 space-y-3">
                                        <p className="text-xs text-blue-200 font-semibold uppercase tracking-tighter">Your Staking Utility</p>
                                        <div className="flex justify-between items-center">
                                            <span className="text-sm text-slate-400 italic">Project Yield (Est. APY)</span>
                                            <span className="text-sm font-bold text-blue-400">~1.91%</span>
                                        </div>
                                        <div className="flex justify-between items-center border-t border-blue-800 pt-2">
                                            <span className="text-sm text-slate-400">Yearly SUI Yield</span>
                                            <span className="text-sm font-bold text-blue-400">+{(investAmount * stakingAPY).toFixed(2)} SUI</span>
                                        </div>
                                    </div>

                                    {txStatus && (
                                        <div className={`p-4 rounded-lg text-center text-sm font-semibold ${
                                            txStatus.includes('Success') || txStatus.includes('‚úÖ') 
                                                ? 'bg-green-900/30 border border-green-600 text-green-400'
                                                : txStatus.includes('Failed') || txStatus.includes('error')
                                                ? 'bg-red-900/30 border border-red-600 text-red-400'
                                                : 'bg-blue-900/30 border border-blue-600 text-blue-400'
                                        }`}>
                                            {txStatus}
                                        </div>
                                    )}

                                    <button 
                                        onClick={executeInvestment}
                                        disabled={!walletConnected || isInvesting}
                                        className={`w-full py-5 rounded-xl font-black text-lg transition-all transform ${
                                            walletConnected && !isInvesting
                                                ? 'bg-gradient-to-r from-blue-600 to-cyan-500 hover:scale-[1.02] shadow-xl shadow-cyan-900/20'
                                                : 'bg-slate-700 text-slate-500 cursor-not-allowed grayscale'
                                        }`}
                                    >
                                        {isInvesting 
                                            ? '‚è≥ PROCESSING...' 
                                            : walletConnected 
                                            ? `CONFIRM ${investAmount} SUI STAKE` 
                                            : 'CONNECT WALLET TO INVEST'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </main>

                    {/* Trust & Legal Footer */}
                    <footer className="mt-20 border-t border-slate-800 bg-black/40 py-12">
                        <div className="max-w-4xl mx-auto px-4 text-center">
                            <div className="flex justify-center gap-2 text-yellow-500 mb-4 font-bold">
                                <i className="fas fa-exclamation-circle"></i> High-Risk Venture Opportunity
                            </div>
                            <p className="text-xs text-slate-500 leading-relaxed">
                                Investment in ARAIL involves significant risk. Equity is distributed as RWA-NFTs on the Sui Mainnet and is subject to a 12-month cliff. 
                                Digital Railway OS is a pre-revenue concept. Past performance of Sui Network is not indicative of future rail dividends.
                            </p>
                        </div>
                    </footer>
                </div>
            );
        }

        // Wrap app with required providers
        function App() {
            return (
                <QueryClientProvider client={queryClient}>
                    <SuiClientProvider networks={networkConfig} defaultNetwork="mainnet">
                        <WalletProvider autoConnect={true}>
                            <ARailInvestorPortal />
                        </WalletProvider>
                    </SuiClientProvider>
                </QueryClientProvider>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
