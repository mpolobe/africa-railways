<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spine Dashboard | Live Network</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; padding: 40px 8%; }
        .card { background: var(--surface); padding: 30px; border-radius: 12px; border: 1px solid #222; position: relative; overflow: hidden; }
        .card::before { content: ""; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--gold); }
        .card i { font-size: 2rem; color: var(--gold); margin-bottom: 15px; display: block; }
        .card-val { font-size: 2.2rem; font-weight: 800; display: block; margin: 10px 0; color: var(--cyan); }
        .card-label { color: #888; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; }
    </style>
</head>
<body>
    <nav>
        <div class="logo"><i class="fas fa-train"></i> Spine Live</div>
        <ul class="nav-links">
            <li><a href="/">Home</a></li>
            <li><a href="/dashboard">Refresh</a></li>
        </ul>
    </nav>

    <div class="dashboard-grid">
        <div class="card">
            <i class="fas fa-signal"></i>
            <span class="card-label">Network Status</span>
            <span class="card-val" id="status">Loading...</span>
        </div>
        <div class="card">
            <i class="fas fa-microchip"></i>
            <span class="card-label">Sui Block Height</span>
            <span class="card-val" id="height">0</span>
        </div>
        <div class="card">
            <i class="fas fa-subway"></i>
            <span class="card-label">Active Trains</span>
            <span class="card-val" id="trains">0</span>
        </div>
    </div>

    <script>
        async function updateDashboard() {
            try {
                const res = await fetch('/telemetry.json');
                const data = await res.json();
                document.getElementById('status').innerText = data.network_status;
                document.getElementById('height').innerText = data.last_block_height.toLocaleString();
                document.getElementById('trains').innerText = data.active_trains;
            } catch (e) {
                console.error("Data sync error:", e);
            }
        }
        setInterval(updateDashboard, 3000);
        updateDashboard();
    </script>
</body>
</html>
